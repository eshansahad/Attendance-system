{% extends "base.html" %}

{% block title %}Bulk Import Students{% endblock %}
{% block header_title %}Bulk Import Students{% endblock %}

{% block content %}

<div class="table-card" style="max-width:600px;">
    <h3><i class="fas fa-file-csv"></i> Import from CSV</h3>
    <p class="muted-text" style="margin-bottom:20px;">
        Upload a <strong>.csv</strong> file with columns: <code>name</code> and
        optionally <code>password</code> (defaults to <code>1234</code> if omitted).
        Existing students are skipped automatically.
    </p>

    <!-- CSV format example -->
    <div style="background:rgba(0,0,0,0.25);border-radius:10px;padding:14px 18px;
                margin-bottom:24px;font-family:monospace;font-size:13px;
                border-left:3px solid var(--accent-neon);">
        name,password<br>
        Alice Johnson,secret123<br>
        Bob Kumar,1234<br>
        Carol Nair,
    </div>

    <form method="POST" action="/bulk_import" enctype="multipart/form-data">
        <label>Choose CSV File</label>
        <input type="file" name="csv_file" accept=".csv" required
               style="display:block;width:100%;padding:10px 12px;margin:6px 0 20px;
                      border-radius:10px;background:rgba(255,255,255,0.05);
                      border:1px solid var(--glass-border);color:var(--text-primary);
                      cursor:pointer;">
        <button type="submit" class="btn btn-primary full-btn">
            <i class="fas fa-upload"></i> Import Students
        </button>
    </form>
</div>

<!-- Results -->
{% if results %}
<div class="table-card" style="max-width:600px;margin-top:24px;">
    <h3><i class="fas fa-list-check"></i> Import Results</h3>
    <table style="font-size:13px;">
        <thead>
            <tr><th>Name</th><th>Result</th></tr>
        </thead>
        <tbody>
        {% for r in results %}
        <tr>
            <td>{{ r.name }}</td>
            <td>
                {% if r.status == "imported" %}
                    <span class="badge badge-present">Imported</span>
                {% else %}
                    <span class="badge" style="background:rgba(255,255,255,0.08);color:var(--text-muted);">
                        Skipped
                    </span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <a href="/students" class="btn btn-primary" style="margin-top:18px;">
        <i class="fas fa-arrow-left"></i> Back to Students
    </a>
</div>
{% endif %}

{% endblock %}