<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Capturing Face...</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="main-content" style="margin-left: 0;">
        <div class="page-wrapper" style="text-align: center; padding-top: 50px;">
            <h2>Step 2: Capturing Face Data for <span style="color: #ff9b44;">{{ student_name }}</span></h2>
            <p>Please look at the camera. Do not move.</p>
            
            <div id="status" style="margin: 20px; font-size: 18px; color: #fbbf24;">Initializing Camera...</div>
            
            <div class="loader" style="margin: 20px auto; width: 50px; height: 50px; border: 5px solid #334155; border-top: 5px solid #ff9b44; border-radius: 50%; animation: spin 1s linear infinite;"></div>
            
            <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>

            <script>
                $(document).ready(function() {
                    $("#status").text("Capturing images... Please wait (approx 10s)");
                    
                    // Call the Python function to start capturing
                    $.get("/capture_images/{{ student_name }}", function(data) {
                        if(data === "captured") {
                            $("#status").html("<span style='color: #10b981;'>Success! Face registered.</span>");
                            $(".loader").hide();
                            setTimeout(function() {
                                window.location.href = "/students";
                            }, 2000);
                        }
                    });
                });
            </script>
        </div>
    </div>
</body>
</html>