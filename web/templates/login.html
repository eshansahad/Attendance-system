<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Attend â€” Login</title>

    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
        --teal:         #0ef0c8;
        --purple:       #c084fc;
        --pink:         #f472b6;
        --blue:         #60a5fa;
        --orange:       #ff9b44;
        --glass-bg:     rgba(255,255,255,0.07);
        --glass-border: rgba(255,255,255,0.15);
        --text:         #ffffff;
        --muted:        rgba(255,255,255,0.5);
        --input-bg:     rgba(255,255,255,0.06);
        --input-border: rgba(255,255,255,0.12);
        --error:        #ff6b6b;
    }

    /* â”€â”€ BODY â”€â”€ */
    body {
        min-height: 100vh;
        font-family: 'DM Sans', sans-serif;
        background: #07030f;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    /* â”€â”€ ANIMATED BLOB BACKGROUND â”€â”€ */
    .bg {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
    }
    .blob {
        position: absolute;
        border-radius: 50%;
        filter: blur(90px);
        opacity: 0.5;
    }
    .b1 {
        width: 650px; height: 650px;
        background: radial-gradient(circle, #c084fc 0%, #818cf8 100%);
        top: -180px; left: -180px;
        animation: blobA 20s ease-in-out infinite;
    }
    .b2 {
        width: 550px; height: 550px;
        background: radial-gradient(circle, #0ef0c8 0%, #60a5fa 100%);
        bottom: -140px; right: -100px;
        animation: blobB 24s ease-in-out infinite;
    }
    .b3 {
        width: 400px; height: 400px;
        background: radial-gradient(circle, #f472b6 0%, #c084fc 100%);
        top: 45%; left: 38%;
        animation: blobC 17s ease-in-out infinite;
    }
    .b4 {
        width: 280px; height: 280px;
        background: radial-gradient(circle, #ff9b44 0%, #f472b6 100%);
        top: 8%; right: 18%;
        animation: blobA 22s ease-in-out infinite reverse;
        animation-delay: -6s;
    }
    @keyframes blobA {
        0%,100% { transform: translate(0,0) scale(1); }
        33%      { transform: translate(55px,35px) scale(1.07); }
        66%      { transform: translate(-28px,65px) scale(0.95); }
    }
    @keyframes blobB {
        0%,100% { transform: translate(0,0) scale(1); }
        33%      { transform: translate(-70px,-45px) scale(1.09); }
        66%      { transform: translate(35px,-25px) scale(0.93); }
    }
    @keyframes blobC {
        0%,100% { transform: translate(0,0) scale(1) rotate(0deg); }
        50%      { transform: translate(-55px,45px) scale(1.13) rotate(180deg); }
    }

    /* Floating particles */
    .particles { position: fixed; inset: 0; z-index: 0; pointer-events: none; }
    .particle {
        position: absolute;
        border-radius: 50%;
        background: rgba(255,255,255,0.6);
        animation: particleDrift linear infinite;
    }

    @keyframes particleDrift {
        0%   { transform: translateY(100vh) scale(0); opacity: 0; }
        10%  { opacity: 1; }
        90%  { opacity: 0.6; }
        100% { transform: translateY(-100px) scale(1); opacity: 0; }
    }

    /* â”€â”€ LAYOUT â”€â”€ */
    .layout {
        position: relative;
        z-index: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0;
        width: 100%;
        max-width: 980px;
        padding: 20px;
        min-height: 100vh;
    }

    /* â”€â”€ LEFT PANEL â”€â”€ */
    .left-panel {
        flex: 1;
        padding: 40px 50px 40px 20px;
        animation: fadeSlideLeft 0.9s cubic-bezier(0.16,1,0.3,1) both;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    @keyframes fadeSlideLeft {
        from { opacity: 0; transform: translateX(-50px); }
        to   { opacity: 1; transform: translateX(0); }
    }

    .brand {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 52px;
    }
    .brand-icon {
        width: 46px; height: 46px;
        background: linear-gradient(135deg, var(--teal), var(--purple));
        border-radius: 13px;
        display: flex; align-items: center; justify-content: center;
        font-size: 20px;
        box-shadow: 0 0 24px rgba(14,240,200,0.35);
    }
    .brand-name {
        font-family: 'Syne', sans-serif;
        font-size: 22px;
        font-weight: 700;
        color: var(--text);
        letter-spacing: -0.5px;
    }
    .brand-name span { color: var(--teal); }

    .headline {
        font-family: 'Syne', sans-serif;
        font-size: clamp(34px,4.5vw,52px);
        font-weight: 800;
        line-height: 1.1;
        color: var(--text);
        letter-spacing: -1.5px;
        margin-bottom: 16px;
    }
    .headline .grad {
        background: linear-gradient(90deg, var(--teal) 0%, var(--purple) 60%, var(--pink) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .tagline {
        font-size: 15px;
        color: var(--muted);
        line-height: 1.7;
        max-width: 280px;
        margin-bottom: 50px;
    }

    /* â”€â”€ CSS CHARACTER â”€â”€ */
    .character-wrap {
        display: flex;
        align-items: flex-end;
        gap: 0;
        animation: charEntry 1s cubic-bezier(0.16,1,0.3,1) 0.3s both;
    }
    @keyframes charEntry {
        from { opacity: 0; transform: translateY(30px); }
        to   { opacity: 1; transform: translateY(0); }
    }

    .character {
        position: relative;
        animation: charBob 3.5s ease-in-out infinite;
    }
    @keyframes charBob {
        0%,100% { transform: translateY(0); }
        50%      { transform: translateY(-14px); }
    }

    /* Body */
    .char-body {
        width: 86px; height: 105px;
        background: linear-gradient(170deg, #5b4ff5 0%, #7c3aed 100%);
        border-radius: 50% 50% 42% 42% / 55% 55% 45% 45%;
        position: relative;
        box-shadow:
            0 12px 35px rgba(92,69,245,0.5),
            inset 0 2px 8px rgba(255,255,255,0.15);
    }
    /* Shine */
    .char-body::before {
        content: '';
        position: absolute;
        top: 8px; left: 12px;
        width: 28px; height: 14px;
        background: rgba(255,255,255,0.2);
        border-radius: 50%;
        transform: rotate(-20deg);
    }

    /* Eyes */
    .char-eye {
        position: absolute;
        top: 30px;
        width: 24px; height: 24px;
        background: white;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    .char-eye.left  { left: 14px; }
    .char-eye.right { right: 14px; }

    .char-pupil {
        width: 11px; height: 11px;
        background: #1a0a3d;
        border-radius: 50%;
        position: relative;
        transition: transform 0.15s ease;
    }
    .char-pupil::after {
        content: '';
        position: absolute;
        top: 2px; right: 2px;
        width: 4px; height: 4px;
        background: white;
        border-radius: 50%;
    }

    /* Feet */
    .char-feet {
        display: flex;
        justify-content: space-around;
        padding: 0 8px;
        margin-top: -4px;
    }
    .char-foot {
        width: 26px; height: 16px;
        background: linear-gradient(170deg, #4f42d8, #6d28d9);
        border-radius: 50% 50% 40% 40%;
        box-shadow: 0 4px 10px rgba(79,66,216,0.4);
    }

    /* Speech bubble */
    .char-bubble {
        position: absolute;
        top: -42px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255,255,255,0.12);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 20px 20px 20px 4px;
        padding: 7px 14px;
        font-size: 12px;
        font-weight: 500;
        color: white;
        white-space: nowrap;
        opacity: 0;
        animation: bubblePop 0.4s ease 1.8s forwards;
    }
    @keyframes bubblePop {
        to { opacity: 1; transform: translateX(-50%) scale(1); }
        from { opacity: 0; transform: translateX(-50%) scale(0.7); }
    }

    /* â”€â”€ RIGHT PANEL (GLASS CARD) â”€â”€ */
    .glass-card {
        width: 420px;
        flex-shrink: 0;
        background: rgba(255,255,255,0.07);
        backdrop-filter: blur(28px) saturate(180%);
        -webkit-backdrop-filter: blur(28px) saturate(180%);
        border: 1px solid rgba(255,255,255,0.14);
        border-radius: 28px;
        padding: 44px 40px;
        box-shadow:
            0 30px 70px rgba(0,0,0,0.4),
            inset 0 1px 0 rgba(255,255,255,0.12);
        animation: fadeSlideRight 0.9s cubic-bezier(0.16,1,0.3,1) both;
        animation-delay: 0.1s;
    }
    @keyframes fadeSlideRight {
        from { opacity: 0; transform: translateX(50px); }
        to   { opacity: 1; transform: translateX(0); }
    }

    .card-title {
        font-family: 'Syne', sans-serif;
        font-size: 26px;
        font-weight: 800;
        color: var(--text);
        letter-spacing: -0.5px;
        margin-bottom: 6px;
    }
    .card-sub {
        font-size: 14px;
        color: var(--muted);
        margin-bottom: 32px;
    }

    /* â”€â”€ ROLE SWITCHER â”€â”€ */
    .role-switcher {
        display: flex;
        background: rgba(0,0,0,0.25);
        border: 1px solid var(--input-border);
        border-radius: 14px;
        padding: 5px;
        margin-bottom: 30px;
        position: relative;
    }
    .role-btn {
        flex: 1;
        padding: 11px 10px;
        border: none;
        background: transparent;
        color: var(--muted);
        font-family: 'DM Sans', sans-serif;
        font-size: 14px;
        font-weight: 500;
        border-radius: 10px;
        cursor: pointer;
        transition: color 0.25s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        position: relative;
        z-index: 1;
    }
    .role-btn.active { color: white; }

    /* Sliding pill */
    .role-pill {
        position: absolute;
        top: 5px; bottom: 5px;
        width: calc(50% - 5px);
        background: linear-gradient(135deg, var(--orange), #ff6f00);
        border-radius: 10px;
        transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1);
        box-shadow: 0 4px 16px rgba(255,155,68,0.4);
        left: 5px;
    }
    .role-pill.student { transform: translateX(calc(100% + 0px)); }

    /* â”€â”€ FORM â”€â”€ */
    .field {
        margin-bottom: 18px;
        position: relative;
    }
    .field label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin-bottom: 8px;
    }
    .field-inner {
        position: relative;
        display: flex;
        align-items: center;
    }
    .field-icon {
        position: absolute;
        left: 14px;
        color: rgba(255,255,255,0.3);
        font-size: 14px;
        pointer-events: none;
        transition: color 0.2s;
    }
    .field input {
        width: 100%;
        padding: 13px 14px 13px 40px;
        background: var(--input-bg);
        border: 1px solid var(--input-border);
        border-radius: 12px;
        color: var(--text);
        font-family: 'DM Sans', sans-serif;
        font-size: 14px;
        outline: none;
        transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
    }
    .field input::placeholder { color: rgba(255,255,255,0.25); }
    .field input:focus {
        border-color: rgba(14,240,200,0.5);
        background: rgba(255,255,255,0.09);
        box-shadow: 0 0 0 3px rgba(14,240,200,0.1);
    }
    .field input:focus + .field-icon,
    .field-inner:focus-within .field-icon {
        color: var(--teal);
    }
    /* Invalid state */
    .field input.invalid {
        border-color: rgba(255,107,107,0.6);
        box-shadow: 0 0 0 3px rgba(255,107,107,0.12);
    }
    .field-error {
        font-size: 12px;
        color: var(--error);
        margin-top: 6px;
        display: flex;
        align-items: center;
        gap: 5px;
        opacity: 0;
        transform: translateY(-4px);
        transition: opacity 0.2s, transform 0.2s;
    }
    .field-error.show {
        opacity: 1;
        transform: translateY(0);
    }

    /* Password toggle */
    .pw-toggle {
        position: absolute;
        right: 14px;
        background: none;
        border: none;
        color: rgba(255,255,255,0.3);
        cursor: pointer;
        font-size: 14px;
        padding: 0;
        transition: color 0.2s;
    }
    .pw-toggle:hover { color: var(--teal); }

    /* â”€â”€ SERVER ERROR â”€â”€ */
    .server-error {
        background: rgba(255,107,107,0.12);
        border: 1px solid rgba(255,107,107,0.3);
        border-radius: 12px;
        padding: 12px 16px;
        font-size: 13px;
        color: var(--error);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
        animation: shake 0.4s ease;
    }
    @keyframes shake {
        0%,100% { transform: translateX(0); }
        20%      { transform: translateX(-6px); }
        40%      { transform: translateX(6px); }
        60%      { transform: translateX(-4px); }
        80%      { transform: translateX(4px); }
    }

    /* â”€â”€ SUBMIT BUTTON â”€â”€ */
    .submit-btn {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, var(--orange) 0%, #ff6600 100%);
        border: none;
        border-radius: 14px;
        color: white;
        font-family: 'Syne', sans-serif;
        font-size: 15px;
        font-weight: 700;
        letter-spacing: 0.3px;
        cursor: pointer;
        margin-top: 8px;
        position: relative;
        overflow: hidden;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 6px 24px rgba(255,155,68,0.35);
    }
    .submit-btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(255,255,255,0.15), transparent);
        opacity: 0;
        transition: opacity 0.2s;
    }
    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 32px rgba(255,155,68,0.5);
    }
    .submit-btn:hover::before { opacity: 1; }
    .submit-btn:active { transform: translateY(0); }

    /* Loading state */
    .submit-btn .btn-text   { transition: opacity 0.2s; }
    .submit-btn .btn-loader {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.2s;
    }
    .submit-btn.loading .btn-text   { opacity: 0; }
    .submit-btn.loading .btn-loader { opacity: 1; }

    .spinner {
        width: 20px; height: 20px;
        border: 2px solid rgba(255,255,255,0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 0.7s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ HINT TEXT â”€â”€ */
    .hint {
        margin-top: 20px;
        text-align: center;
        font-size: 12px;
        color: rgba(255,255,255,0.25);
        line-height: 1.6;
    }
    .hint strong { color: rgba(255,255,255,0.4); }

    /* â”€â”€ RESPONSIVE â”€â”€ */
    @media (max-width: 720px) {
        .left-panel { display: none; }
        .layout { justify-content: center; }
        .glass-card { width: 100%; max-width: 420px; }
    }
    </style>
</head>
<body>

<!-- Animated background blobs -->
<div class="bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="blob b3"></div>
    <div class="blob b4"></div>
</div>

<!-- Floating particles -->
<div class="particles" id="particles"></div>

<!-- Main layout -->
<div class="layout">

    <!-- â”€â”€ LEFT PANEL â”€â”€ -->
    <div class="left-panel">
        <div class="brand">
            <div class="brand-icon">
                <i class="fas fa-fingerprint" style="color:white;"></i>
            </div>
            <div class="brand-name">Smart<span>Attend</span></div>
        </div>

        <h1 class="headline">
            Welcome<br>
            <span class="grad">Back !!</span>
        </h1>
        <p class="tagline">
            AI-powered attendance system. Fast, accurate, and secure face recognition for modern classrooms.
        </p>

        <!-- CSS Character -->
        <div class="character-wrap">
            <div class="character" id="character">
                <!-- Speech bubble -->
                <div class="char-bubble" id="bubble">ðŸ‘‹ Hi there!</div>

                <!-- Body -->
                <div class="char-body">
                    <div class="char-eye left">
                        <div class="char-pupil" id="pupil-left"></div>
                    </div>
                    <div class="char-eye right">
                        <div class="char-pupil" id="pupil-right"></div>
                    </div>
                </div>

                <!-- Feet -->
                <div class="char-feet">
                    <div class="char-foot"></div>
                    <div class="char-foot"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- â”€â”€ GLASS CARD â”€â”€ -->
    <div class="glass-card">
        <p class="card-title">Welcome Back!</p>
        <p class="card-sub">Please enter your details to continue.</p>

        <!-- Role Switcher -->
        <div class="role-switcher">
            <div class="role-pill" id="role-pill"></div>
            <button type="button" class="role-btn active" id="btn-teacher"
                    onclick="setRole('teacher')">
                <i class="fas fa-chalkboard-teacher"></i> Teacher
            </button>
            <button type="button" class="role-btn" id="btn-student"
                    onclick="setRole('student')">
                <i class="fas fa-user-graduate"></i> Student
            </button>
        </div>

        <!-- Server-side error -->
        {% if error %}
        <div class="server-error">
            <i class="fas fa-exclamation-circle"></i>
            {{ error }}
        </div>
        {% endif %}

        <!-- Login form -->
        <form id="loginForm" action="/login" method="POST" novalidate>
            <input type="hidden" name="role" id="role-input" value="teacher">

            <!-- Username -->
            <div class="field">
                <label id="username-label">Teacher Username</label>
                <div class="field-inner">
                    <input type="text" name="username" id="username"
                           placeholder="Enter your username" autocomplete="username">
                    <i class="fas fa-user field-icon"></i>
                </div>
                <div class="field-error" id="username-error">
                    <i class="fas fa-circle-exclamation"></i>
                    <span>Username is required.</span>
                </div>
            </div>

            <!-- Password -->
            <div class="field">
                <label>Password</label>
                <div class="field-inner">
                    <input type="password" name="password" id="password"
                           placeholder="Enter your password" autocomplete="current-password">
                    <i class="fas fa-lock field-icon"></i>
                    <button type="button" class="pw-toggle" id="pw-toggle"
                            onclick="togglePw()" tabindex="-1">
                        <i class="fas fa-eye" id="pw-icon"></i>
                    </button>
                </div>
                <div class="field-error" id="password-error">
                    <i class="fas fa-circle-exclamation"></i>
                    <span>Password is required.</span>
                </div>
            </div>

            <!-- Submit -->
            <button type="submit" class="submit-btn" id="submit-btn">
                <span class="btn-text">
                    <i class="fas fa-arrow-right-to-bracket"></i> &nbsp;Login
                </span>
                <span class="btn-loader">
                    <div class="spinner"></div>
                </span>
            </button>
        </form>

        <!-- Hint -->
        <div class="hint">
            Teacher default: <strong>admin / admin123</strong><br>
            Student default: <strong>Student Name / 1234</strong>
        </div>
    </div>

</div><!-- /layout -->

<script>
/* â”€â”€ ROLE SWITCHER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const bubble   = document.getElementById('bubble');
const pill     = document.getElementById('role-pill');
const roleInput = document.getElementById('role-input');
const usernameLabel = document.getElementById('username-label');
const btnTeacher = document.getElementById('btn-teacher');
const btnStudent = document.getElementById('btn-student');

const bubbleMessages = {
    teacher: "ðŸ‘‹ Hi, Teacher!",
    student: "âœ¨ Hello, Student!"
};

function setRole(role) {
    roleInput.value = role;

    if (role === 'teacher') {
        btnTeacher.classList.add('active');
        btnStudent.classList.remove('active');
        pill.classList.remove('student');
        usernameLabel.textContent = 'Teacher Username';
        document.getElementById('username').placeholder = 'Enter your username';
    } else {
        btnStudent.classList.add('active');
        btnTeacher.classList.remove('active');
        pill.classList.add('student');
        usernameLabel.textContent = 'Student Name';
        document.getElementById('username').placeholder = 'Enter your full name';
    }

    // Update bubble
    bubble.textContent = bubbleMessages[role];
    bubble.style.opacity = '0';
    setTimeout(() => { bubble.style.transition = 'opacity 0.3s'; bubble.style.opacity = '1'; }, 50);
}

/* â”€â”€ PASSWORD TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function togglePw() {
    const pw   = document.getElementById('password');
    const icon = document.getElementById('pw-icon');
    if (pw.type === 'password') {
        pw.type = 'text';
        icon.className = 'fas fa-eye-slash';
    } else {
        pw.type = 'password';
        icon.className = 'fas fa-eye';
    }
}

/* â”€â”€ INLINE FORM VALIDATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.getElementById('loginForm').addEventListener('submit', function(e) {
    let valid = true;

    const username = document.getElementById('username');
    const password = document.getElementById('password');
    const uErr     = document.getElementById('username-error');
    const pErr     = document.getElementById('password-error');

    // Reset
    username.classList.remove('invalid');
    password.classList.remove('invalid');
    uErr.classList.remove('show');
    pErr.classList.remove('show');

    if (!username.value.trim()) {
        username.classList.add('invalid');
        uErr.classList.add('show');
        valid = false;
    }
    if (!password.value.trim()) {
        password.classList.add('invalid');
        pErr.classList.add('show');
        valid = false;
    }

    if (!valid) {
        e.preventDefault();
        return;
    }

    // Show loading spinner
    document.getElementById('submit-btn').classList.add('loading');
});

// Clear error on type
['username','password'].forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
        this.classList.remove('invalid');
        document.getElementById(id + '-error').classList.remove('show');
    });
});

/* â”€â”€ EYE TRACKING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('mousemove', function(e) {
    ['left','right'].forEach(side => {
        const eye   = document.querySelector('.char-eye.' + side);
        const pupil = eye.querySelector('.char-pupil');
        const rect  = eye.getBoundingClientRect();
        const ex    = rect.left + rect.width  / 2;
        const ey    = rect.top  + rect.height / 2;
        const dx    = e.clientX - ex;
        const dy    = e.clientY - ey;
        const angle = Math.atan2(dy, dx);
        const dist  = Math.min(5, Math.hypot(dx, dy) * 0.1);
        const px    = Math.cos(angle) * dist;
        const py    = Math.sin(angle) * dist;
        pupil.style.transform = `translate(${px}px, ${py}px)`;
    });
});

/* â”€â”€ BLINK every 3-5s â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function blink() {
    document.querySelectorAll('.char-eye').forEach(eye => {
        eye.style.transform = 'scaleY(0.1)';
        setTimeout(() => eye.style.transform = '', 120);
    });
    setTimeout(blink, 3000 + Math.random() * 2000);
}
document.querySelectorAll('.char-eye').forEach(e => {
    e.style.transition = 'transform 0.07s ease';
});
setTimeout(blink, 2000);

/* â”€â”€ FLOATING PARTICLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const container = document.getElementById('particles');
for (let i = 0; i < 22; i++) {
    const p  = document.createElement('div');
    p.className = 'particle';
    const size = Math.random() * 3 + 1;
    p.style.cssText = `
        width:  ${size}px;
        height: ${size}px;
        left:   ${Math.random() * 100}vw;
        bottom: ${Math.random() * -20}px;
        animation-duration:  ${Math.random() * 10 + 8}s;
        animation-delay:    -${Math.random() * 12}s;
        opacity: ${Math.random() * 0.5 + 0.2};
    `;
    container.appendChild(p);
}

/* â”€â”€ PRE-FILL ROLE IF SERVER RETURNED ERROR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
{% if error %}
// Keep role selection visible on failed login by checking which was tried
const urlParams = new URLSearchParams();
{% endif %}
</script>
</body>
</html>


/* git remote get-url origin >nul 2>&1 && git remote set-url origin https://github.com/eshansahad/Attendance-system || git remote add origin https://github.com/eshansahad/Attendance-system */